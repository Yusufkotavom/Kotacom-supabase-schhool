---
interface Props {
  className?: string;
}

const { className = '' } = Astro.props;

// FAQ data for school theme
const faqs = [
  {
    question: "What makes your school unique?",
    answer: "Our school combines traditional academic excellence with modern technology integration, fostering creativity and critical thinking in a supportive, colorful environment that celebrates diversity and innovation."
  },
  {
    question: "What technology programs do you offer?",
    answer: "We offer comprehensive technology education including computer science, digital arts, robotics, coding workshops, and STEM programs designed to prepare students for the digital future."
  },
  {
    question: "How do you support student creativity?",
    answer: "Through our Creative Arts Program, students explore visual arts, music, drama, and digital media. We encourage innovative thinking and provide platforms for students to showcase their creative talents."
  },
  {
    question: "What extracurricular activities are available?",
    answer: "Students can participate in robotics clubs, coding competitions, art exhibitions, science fairs, sports teams, and various clubs that align with their interests and passions."
  },
  {
    question: "How do you ensure academic excellence?",
    answer: "We maintain high academic standards through personalized learning plans, experienced educators, small class sizes, and continuous assessment to ensure every student reaches their full potential."
  },
  {
    question: "What facilities does your school have?",
    answer: "Our campus features modern classrooms, computer labs, science laboratories, art studios, a library, sports facilities, and outdoor learning spaces designed to enhance the educational experience."
  }
];
---

<section class={`py-16 px-4 ${className}`}>
  <div class="max-w-4xl mx-auto">
    <!-- Section Header -->
    <div class="text-center mb-16" data-reveal="fade-up">
      <h2 class="text-4xl md:text-5xl font-bold mb-6">
        <span class="bg-gradient-to-r from-blue-600 via-red-600 to-yellow-600 bg-clip-text text-transparent">
          Frequently Asked Questions
        </span>
      </h2>
      <p class="text-xl text-gray-600 dark:text-gray-300">
        Get answers to common questions about our school and programs
      </p>
    </div>
    
    <!-- FAQ Items -->
    <div class="space-y-6">
      {faqs.map((faq, index) => (
        <div 
          class="bg-white dark:bg-gray-800 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 border-2 border-blue-200 dark:border-blue-700 overflow-hidden"
          data-reveal="fade-up"
          data-reveal-delay={index * 150}
        >
          <button 
            class="w-full px-6 py-4 text-left focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset"
            onclick={`toggleFAQ(${index})`}
            aria-expanded="false"
            aria-controls={`faq-answer-${index}`}
          >
            <div class="flex items-center justify-between">
              <h3 class="text-lg font-bold text-gray-900 dark:text-white pr-4">
                {faq.question}
              </h3>
              <svg 
                class="w-5 h-5 text-blue-600 transform transition-transform duration-200" 
                fill="none" 
                stroke="currentColor" 
                viewBox="0 0 24 24"
                id={`faq-icon-${index}`}
              >
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </div>
          </button>
          
          <div 
            class="px-6 pb-4 hidden" 
            id={`faq-answer-${index}`}
            aria-labelledby={`faq-question-${index}`}
          >
            <p class="text-gray-600 dark:text-gray-300 leading-relaxed">
              {faq.answer}
            </p>
          </div>
        </div>
      ))}
    </div>
    
    <!-- Contact CTA -->
    <div class="text-center mt-12" data-reveal="fade-up">
      <p class="text-lg text-gray-600 dark:text-gray-300 mb-6">
        Still have questions? We're here to help!
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="/contact" class="school-btn-primary px-8 py-3 rounded-lg text-lg font-bold hover:scale-105 transition-all duration-200 shadow-lg">
          Contact Us
        </a>
        <a href="https://wa.me/085799520350" class="school-btn-accent px-8 py-3 rounded-lg text-lg font-bold hover:scale-105 transition-all duration-200 shadow-lg">
          WhatsApp Chat
        </a>
      </div>
    </div>
  </div>
</section>

<script>
  // FAQ toggle functionality
  function toggleFAQ(index) {
    const answer = document.getElementById(`faq-answer-${index}`);
    const icon = document.getElementById(`faq-icon-${index}`);
    const button = document.querySelector(`[onclick="toggleFAQ(${index})"]`);
    
    if (answer.classList.contains('hidden')) {
      // Show answer
      answer.classList.remove('hidden');
      answer.classList.add('block');
      icon.style.transform = 'rotate(180deg)';
      button.setAttribute('aria-expanded', 'true');
      
      // Add entrance animation
      answer.style.opacity = '0';
      answer.style.transform = 'translateY(-10px)';
      
      setTimeout(() => {
        answer.style.transition = 'opacity 0.3s ease-out, transform 0.3s ease-out';
        answer.style.opacity = '1';
        answer.style.transform = 'translateY(0)';
      }, 10);
      
    } else {
      // Hide answer
      answer.style.transition = 'opacity 0.3s ease-out, transform 0.3s ease-out';
      answer.style.opacity = '0';
      answer.style.transform = 'translateY(-10px)';
      
      setTimeout(() => {
        answer.classList.remove('block');
        answer.classList.add('hidden');
        icon.style.transform = 'rotate(0deg)';
        button.setAttribute('aria-expanded', 'false');
      }, 300);
    }
  }
  
  // Scroll reveal functionality
  class ScrollReveal {
    constructor() {
      this.elements = document.querySelectorAll('[data-reveal]');
      this.init();
    }
    
    init() {
      this.createObserver();
      this.handleScroll();
    }
    
    createObserver() {
      const options = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      };
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            this.revealElement(entry.target);
            observer.unobserve(entry.target);
          }
        });
      }, options);
      
      this.elements.forEach(el => observer.observe(el));
    }
    
    revealElement(element) {
      const delay = element.getAttribute('data-reveal-delay') || 0;
      
      setTimeout(() => {
        element.style.opacity = '1';
        element.style.transform = 'translateY(0)';
        element.classList.add('revealed');
      }, parseInt(delay));
    }
    
    handleScroll() {
      // Add initial styles
      this.elements.forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(30px)';
        el.style.transition = 'opacity 0.8s ease-out, transform 0.8s ease-out';
      });
    }
  }
  
  // Initialize scroll reveal when page loads
  document.addEventListener('astro:page-load', () => {
    new ScrollReveal();
  });
  
  // Also initialize on first load
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
      new ScrollReveal();
    });
  } else {
    new ScrollReveal();
  }
</script>