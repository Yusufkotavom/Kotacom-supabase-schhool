---
import { getSectionConfigByPath } from "../../data/seo/config";

interface Props {
  currentPage: number;
  lastPage: number;
}

const { currentPage, lastPage } = Astro.props as Props;
const section = getSectionConfigByPath(Astro.url.pathname);
const shouldNoindex = (section && section.robotsIndexPaginated === false && currentPage > 1);
---
{Astro.props.currentPage && Astro.props.currentPage > 1 && (
  <link rel="prev" href={Astro.props.currentPage - 1 === 1
    ? Astro.url.pathname.replace(/\d+\/?$/, '')
    : Astro.url.pathname.replace(/\d+\/?$/, `${Astro.props.currentPage - 1}/`)} />
)}
{Astro.props.currentPage && Astro.props.currentPage < Astro.props.lastPage && (
  <link rel="next" href={Astro.url.pathname.replace(/\d+\/?$/, `${Astro.props.currentPage + 1}/`)} />
)}
{shouldNoindex && (<meta name="robots" content="noindex,follow" />)}