---
interface Props {
  className?: string;
}

const { className = '' } = Astro.props;

// Sample testimonials data
const testimonials = [
  {
    name: "Sarah Johnson",
    role: "Parent",
    content: "The school has transformed my child's learning experience. The technology integration and creative programs have sparked a real passion for learning.",
    avatar: "https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face"
  },
  {
    name: "Michael Chen",
    role: "Parent",
    content: "Outstanding teachers and innovative programs. My daughter has grown so much academically and creatively since joining this school.",
    avatar: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face"
  },
  {
    name: "Emily Rodriguez",
    role: "Parent",
    content: "The community atmosphere is amazing. My son has made great friends and the school really supports each child's individual growth.",
    avatar: "https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face"
  },
  {
    name: "David Thompson",
    role: "Parent",
    content: "Excellent academic standards combined with creative arts and technology. This school prepares children for the future while nurturing their creativity.",
    avatar: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face"
  },
  {
    name: "Lisa Wang",
    role: "Parent",
    content: "The teachers are dedicated and caring. They really understand how to make learning engaging and fun for children of all ages.",
    avatar: "https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=150&h=150&fit=crop&crop=face"
  },
  {
    name: "Robert Davis",
    role: "Parent",
    content: "Great facilities and programs. My children love coming to school every day and are excited about their learning journey.",
    avatar: "https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=150&h=150&fit=crop&crop=face"
  }
];
---

<section class={`py-16 px-4 ${className} section-bg-light dark:section-bg-dark relative overflow-hidden`}>
  <!-- Creative floating shapes -->
  <div class="absolute inset-0 pointer-events-none">
    <div class="absolute top-20 right-20 w-28 h-28 bg-gradient-to-br from-blue-200/20 to-blue-300/20 rounded-full blur-2xl animate-pulse"></div>
    <div class="absolute bottom-20 left-20 w-24 h-24 bg-gradient-to-br from-yellow-200/20 to-orange-300/20 rounded-full blur-2xl animate-pulse" style="animation-delay: 1.5s;"></div>
    <div class="absolute top-1/3 left-1/3 w-20 h-20 bg-gradient-to-br from-red-200/20 to-pink-300/20 rounded-full blur-2xl animate-pulse" style="animation-delay: 3s;"></div>
  </div>
  
  <div class="max-w-7xl mx-auto relative z-10">
    <!-- Section Header -->
    <div class="text-center mb-16" data-reveal="fade-up">
      <h2 class="text-4xl md:text-5xl font-bold mb-6">
        <span class="bg-gradient-to-r from-blue-600 via-red-600 to-yellow-600 bg-clip-text text-transparent">
          What Our Parents Say
        </span>
      </h2>
      <p class="text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto">
        Hear from our school community about their experiences and the positive impact on their children's education
      </p>
    </div>
    
    <!-- Testimonials Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {testimonials.map((testimonial, index) => (
        <div 
          class="school-card rounded-lg p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2"
          data-reveal="fade-up"
          data-reveal-delay={index * 200}
        >
          <!-- Quote Icon -->
          <div class="mb-4">
            <svg class="w-8 h-8 text-blue-400/80 dark:text-blue-300/80" fill="currentColor" viewBox="0 0 24 24">
              <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/>
            </svg>
          </div>
          
          <!-- Testimonial Content -->
          <p class="text-gray-700 dark:text-gray-300 mb-6 leading-relaxed italic">
            "{testimonial.content}"
          </p>
          
          <!-- Author Info -->
          <div class="flex items-center">
            <img 
              src={testimonial.avatar} 
              alt={testimonial.name}
              class="w-12 h-12 rounded-full object-cover border-2 border-blue-200/50 dark:border-blue-700/50"
            />
            <div class="ml-4">
              <h4 class="font-semibold text-gray-900 dark:text-white">
                {testimonial.name}
              </h4>
              <p class="text-sm text-gray-600/80 dark:text-gray-400/80">
                {testimonial.role}
              </p>
            </div>
          </div>
          
          <!-- Decorative elements -->
          <div class="absolute top-4 right-4 w-2 h-2 bg-yellow-400/60 rounded-full animate-pulse"></div>
          <div class="absolute bottom-4 left-4 w-1.5 h-1.5 bg-blue-400/60 rounded-full animate-bounce"></div>
        </div>
      ))}
    </div>
    
    <!-- Call to Action -->
    <div class="text-center mt-16" data-reveal="fade-up">
      <div class="bg-gradient-to-r from-blue-600/90 via-red-600/90 to-yellow-600/90 rounded-2xl p-8 md:p-12 text-white backdrop-blur-sm">
        <h3 class="text-3xl font-bold mb-4">
          Join Our School Family
        </h3>
        <p class="text-xl mb-8 opacity-90">
          Experience the difference our school can make in your child's education
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a href="/admissions" class="bg-white/90 text-blue-600 px-8 py-3 rounded-lg text-lg font-bold hover:scale-105 transition-all duration-200 shadow-lg backdrop-blur-sm">
            Apply Now
          </a>
          <a href="https://wa.me/085799520350" class="bg-white/20 backdrop-blur-sm border border-white/30 text-white px-8 py-3 rounded-lg text-lg font-bold hover:bg-white/30 transition-all duration-200 shadow-lg">
            Schedule a Tour
          </a>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Scroll reveal functionality
  class ScrollReveal {
    constructor() {
      this.elements = document.querySelectorAll('[data-reveal]');
      this.init();
    }
    
    init() {
      this.createObserver();
      this.handleScroll();
    }
    
    createObserver() {
      const options = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      };
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            this.revealElement(entry.target);
            observer.unobserve(entry.target);
          }
        });
      }, options);
      
      this.elements.forEach(el => observer.observe(el));
    }
    
    revealElement(element) {
      const delay = element.getAttribute('data-reveal-delay') || 0;
      
      setTimeout(() => {
        element.style.opacity = '1';
        element.style.transform = 'translateY(0)';
        element.classList.add('revealed');
      }, parseInt(delay));
    }
    
    handleScroll() {
      // Add initial styles
      this.elements.forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(30px)';
        el.style.transition = 'opacity 0.8s ease-out, transform 0.8s ease-out';
      });
    }
  }
  
  // Initialize scroll reveal when page loads
  document.addEventListener('astro:page-load', () => {
    new ScrollReveal();
  });
  
  // Also initialize on first load
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
      new ScrollReveal();
    });
  } else {
    new ScrollReveal();
  }
</script>