---
// âš ï¸  DISABLED - NOT USED âš ï¸
// This file has been disabled to prevent double routing conflicts
// 
// PROBLEM: This file was generating /posts/slug routes which conflicted with
// the root [...slug].astro that generates /slug routes (direct access)
//
// SOLUTION: Use only the root [...slug].astro for post routing
// Keep this file for reference but it's not active
//
// ROUTES:
// âœ… /slug (from root [...slug].astro) - ACTIVE
// âŒ /posts/slug (from this file) - DISABLED
//
// If you need to re-enable this, ensure you remove the root [...slug].astro first
// to avoid duplicate routes during build.

/*
import PostLayout from '../../layouts/PostLayout.astro';
import { getPostsDirectFromSupabase, convertSupabasePost } from '../../lib/supabase-direct';

export async function getStaticPaths() {
	// Get ALL posts directly from Supabase - MUCH faster!
	const supabasePosts = await getPostsDirectFromSupabase(10000);
	console.log(`ðŸš€ Building static paths for ${supabasePosts?.length || 0} posts (direct from Supabase)`);
	
	const validPosts = supabasePosts
		.filter((post:any) => post.slug && typeof post.slug === 'string')
		.map(convertSupabasePost);
	
	console.log(`âœ… Valid posts with slugs: ${validPosts.length}`);
	return validPosts.map((post:any)=> ({
		params: { slug: post.slug },
		props: { post }
	}));
}

type Props = { post: any };

const { post } = Astro.props;

const layoutData = {
	title: post.title,
	content: post.body || "",
	tags: (post.tags||[]).map((x:any)=>x.value||x),
	category: (post.category||[]).map((x:any)=>x.value||x),
	slug: post.slug,
	imageUrl: post.imageUrl || post.coverImage || post.image || "",
	coverImage: post.coverImage || post.imageUrl || post.image || "",
	publishedAt: post.published ? new Date(post.published) : (post.publishedAt ? new Date(post.publishedAt) : new Date()),
	description: post.description || "",
	author: post.author || "",
	source: 'supabase'
};
---

<PostLayout {...layoutData}>
</PostLayout>
*/
---

<!-- 
  âš ï¸  DISABLED FILE - NOT USED âš ï¸
  
  This file has been disabled to prevent double routing conflicts.
  
  PROBLEM: This file was generating /posts/slug routes which conflicted with
  the root [...slug].astro that generates /slug routes (direct access)
  
  SOLUTION: Use only the root [...slug].astro for post routing
  Keep this file for reference but it's not active
  
  ROUTES:
  âœ… /slug (from root [...slug].astro) - ACTIVE  
  âŒ /posts/slug (from this file) - DISABLED
  
  If you need to re-enable this, ensure you remove the root [...slug].astro first
  to avoid duplicate routes during build.
-->

<div class="p-8 text-center text-gray-500">
  <h1 class="text-2xl font-bold mb-4">File Disabled</h1>
  <p class="mb-2">This routing file has been disabled to prevent double routing conflicts.</p>
  <p class="text-sm">Posts are now served from the root level: <code>/slug</code> instead of <code>/posts/slug</code></p>
</div>
